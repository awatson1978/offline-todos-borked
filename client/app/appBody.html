
<template name="appBody">
  <div id="appBody" class="{{menuOpen}}">

    <section id="sidebarMenu" class="sidebarMenu">

      {{#if currentUser}}
        <div class="btns-group-vertical panel">
          <a id="currentUserEmail" href="#" class="js-user-menu btn-secondary">
            {{#if userMenuOpen}}
              <span class="icon-arrow-up"></span>
              {{else}}
              <span class="icon-arrow-down"></span>
            {{/if}}
            {{email}}
          </a>
          {{#if userMenuOpen}}
            <hr>
            <a id="aboutButton" class="btn-secondary" href="{{pathFor 'aboutPage'}}">About Grove Planner</a>
            <a id="glossaryButton" class="btn-secondary" href="{{pathFor 'glossaryPage'}}">Grove Glossary</a>
            <a id="eulaButton" class="btn-secondary" href="{{pathFor 'eulaPage'}}">End User Agreement</a>
            <a id="privacyButton" class="btn-secondary" href="{{pathFor 'privacyPage'}}">Privacy Policy</a>
            <hr>
            <a id="logoutButton" class="js-logout btn-secondary">Logout</a>
          {{/if}}
        </div>
      {{else}}
        <div id="entryButtons" class="btns-group panel">
          <a id="signInButton" href="{{pathFor 'entrySignIn'}}" class="btn-secondary">Sign In</a>
          <a id="signUpButton" href="{{pathFor 'entrySignUp'}}" class="btn-secondary">Join</a>
        </div>
      {{/if}}


      <div id="todosLists" class="todosLists">

        <div class="panel panel-default">
          <div class="panel-body">
            <a id="newListButton" class="js-new-list link-list-new"><span class="icon-plus"></span>New List</a>
            {{#each lists}}
              <a href="{{pathFor 'todosListPage'}}" class="listItem {{activeListClass}}" title="{{name}}">
                {{#if userId}}
                  <span class="icon-lock"></span>
                {{/if}}
                {{name}}
                {{#if incompleteCount}}
                  <span class="count-list">{{incompleteCount}}</span>
                {{/if}}
              </a>
            {{/each}}
          </div>
        </div>

      </div>

      <div id="connectionStatusPanel" class="panel">
        {{getConnectionStatus}}
      </div>
    </section>



    <div class="contentOverlay"></div>

    <div id="contentContainer" class="tile">
      {{#each thisArray}}
        {{> yield}}
      {{/each}}

      {{#unless connected}}
        <nav id="connectionAlert" class="navbar navbar-default navbar-fixed-bottom">
          <div class="connectionPanel container">
            <span id="connectionIcon" class="icon-sync"></span>
            <div class="meta">
              <div id="connectionTitle" class="title-notification">Trying to connect</div>
              <div id="connectionMessage" class="description">There seems to be a connection issue</div>
            </div>
          </div>
        </nav>
      {{/unless}}
    </div>


  </div>
</template>
